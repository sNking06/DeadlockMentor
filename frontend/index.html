<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deadlock Explorer</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="app-shell">

      <!-- â”€â”€ SIDEBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <aside class="sidebar">
        <div class="brand">
          <svg class="brand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="11" width="18" height="11" rx="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          <div class="brand-text">
            <span class="brand-name">Deadlock</span>
            <span class="brand-sub">Explorer</span>
          </div>
        </div>

        <nav class="sidebar-nav">
          <button class="nav-item is-active" data-tab="health">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
            </svg>
            <span>Santé API</span>
          </button>
          <button class="nav-item" data-tab="leaderboard">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="20" x2="18" y2="10"/>
              <line x1="12" y1="20" x2="12" y2="4"/>
              <line x1="6" y1="20" x2="6" y2="14"/>
            </svg>
            <span>Leaderboard</span>
          </button>
          <button class="nav-item" data-tab="history">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            <span>Historique</span>
          </button>
          <button class="nav-item" data-tab="builds">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="6" rx="1"/>
              <rect x="3" y="14" width="18" height="6" rx="1"/>
              <line x1="8" y1="7" x2="8" y2="7"/>
              <line x1="8" y1="17" x2="8" y2="17"/>
            </svg>
            <span>Builds</span>
          </button>
          <button class="nav-item" data-tab="guide">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v14a1 1 0 0 1-1.45.9L12 17.5l-4.55 2.4A1 1 0 0 1 6 19V5z"/>
              <path d="M8 7h7"/>
              <path d="M8 11h7"/>
            </svg>
            <span>Guide stratégique</span>
          </button>
        </nav>

        <div class="sidebar-foot">
          <div class="api-status" id="api-status">
            <span class="api-dot"></span>
            <span class="api-label">Vérification…</span>
          </div>
        </div>
      </aside>

      <!-- â”€â”€ MAIN CONTENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <main class="content-area">

        <!-- HOME TAB -->
        <section class="tab is-active" id="tab-health">
          <section class="home-hero">
            <div class="home-brand-row">
              <div class="home-logo">DEADLOCK MENTOR</div>
            </div>
            <div class="home-search-wrap">
              <input id="home-search-input" class="home-search-input" type="text" value="178737114" placeholder="Rechercher par pseudo Steam ou Account ID..." />
              <button class="home-search-btn" id="home-search-btn" aria-label="Search player">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="11" cy="11" r="8"></circle>
                  <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
              </button>
            </div>
          </section>

          <div class="card compact-health-card">
            <header class="page-head">
              <div class="page-meta">
                <h1>Santé API</h1>
                <p>Monitoring live des services.</p>
              </div>
              <button class="btn btn-primary" id="btn-health">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="23 4 23 10 17 10"/>
                  <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
                </svg>
                Actualiser
              </button>
            </header>
            <div class="health-grid" id="health-grid">
              <article class="health-tile" data-health-key="global"><span class="health-dot"></span><span class="health-name">API Deadlock</span></article>
              <article class="health-tile" data-health-key="clickhouse"><span class="health-dot"></span><span class="health-name">ClickHouse</span></article>
              <article class="health-tile" data-health-key="postgres"><span class="health-dot"></span><span class="health-name">Postgres</span></article>
              <article class="health-tile" data-health-key="redis"><span class="health-dot"></span><span class="health-name">Redis</span></article>
            </div>
            <div class="health-meta" id="health-meta">Derniere verification: -</div>
          </div>
        </section>

        <!-- LEADERBOARD TAB -->
        <section class="tab" id="tab-leaderboard">
          <header class="page-head">
            <div class="page-meta">
              <h1>Leaderboard</h1>
              <p>Classement des meilleurs joueurs par région.</p>
            </div>
          </header>
          <div class="card">
            <div class="controls">
              <div class="field">
                <label for="region">Région</label>
                <select id="region" class="select">
                  <option>Europe</option>
                  <option>Asia</option>
                  <option>NAmerica</option>
                  <option>SAmerica</option>
                  <option>Oceania</option>
                </select>
              </div>
              <div class="field">
                <label for="limit">Joueurs</label>
                <input id="limit" class="input w-20" type="number" min="1" max="100" value="10" />
              </div>
              <div class="field">
                <label for="leaderboard-hero-filter">Hero</label>
                <select id="leaderboard-hero-filter" class="select" aria-label="Filtrer le leaderboard par hero" disabled>
                  <option value="">Tous les heros</option>
                </select>
              </div>
              <button class="btn btn-primary ml-auto" id="btn-leaderboard">Charger</button>
            </div>
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th class="w-14">#</th>
                    <th>Joueur</th>
                    <th>Rang</th>
                    <th>Top Héros</th>
                  </tr>
                </thead>
                <tbody id="leaderboard-body">
                  <tr><td colspan="4" class="empty-row">Choisissez une région et cliquez sur Charger.</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>
        <!-- HISTORIQUE TAB -->
        <section class="tab" id="tab-history">
          <header class="page-head">
            <div class="page-meta">
              <h1>Historique Joueur</h1>
              <p>Les matchs recents, affiches par lot de 10.</p>
            </div>
          </header>
          <div class="card history-layout-card">
            <div class="history-layout">
              <aside class="history-side">
                <div class="history-profile-head">
                  <div class="history-avatar">S</div>
                  <div>
                    <div class="history-player-title" id="history-player-title">Player</div>
                    <div class="history-player-sub" id="history-player-sub">Estimated Rank</div>
                  </div>
                </div>
                <div class="controls">
                  <div class="field">
                    <label for="accountId">Account ID</label>
                    <input id="accountId" class="input w-40" type="number" value="178737114" placeholder="Ex: 178737114" />
                  </div>
                  <div class="history-side-actions">
                    <button class="btn btn-primary" id="btn-history">Charger</button>
                    <button class="btn btn-history-api" id="btn-history-profile" type="button">Profil API</button>
                  </div>
                </div>
                <div class="history-summary-grid">
                  <div class="history-summary-item"><span>WR</span><strong id="history-wr">-</strong></div>
                  <div class="history-summary-item"><span>KDA</span><strong id="history-kda">-</strong></div>
                  <div class="history-summary-item"><span>Matches</span><strong id="history-count">-</strong></div>
                </div>
                <div class="history-rank-panel" id="history-rank-panel">
                  <div class="history-rank-panel-head">Rang actuel</div>
                  <div class="history-rank-panel-body">
                    <div class="history-rank-panel-icon" id="history-rank-icon-wrap">
                      <span id="history-rank-icon-fallback">?</span>
                    </div>
                    <div class="history-rank-panel-meta">
                      <strong id="history-rank-name">Inconnu</strong>
                      <small id="history-rank-sub">Estimated Rank</small>
                    </div>
                  </div>
                </div>
                <div id="playerInfoDisplay" class="history-player-chip" style="display: none;">
                  <span id="playerInfoName"></span>
                  <small id="playerInfoId"></small>
                </div>
              </aside>

              <section class="history-main">
                <header class="history-main-head">
                  <h2>Match History</h2>
                  <div class="history-main-filters">
                    <span>All Modes</span>
                    <select id="history-hero-filter" class="history-hero-filter" aria-label="Filtrer par hero">
                      <option value="">All Heroes</option>
                    </select>
                  </div>
                </header>
                <div style="padding: 12px; margin: 8px 0 14px; background: rgba(255, 193, 7, 0.1); border-left: 3px solid #ffc107; border-radius: 4px; font-size: 13px; color: #ffc107;">
                  Entrez directement un Account ID (ex: depuis le leaderboard ou l'URL d'un profil Steam).
                </div>
                <div class="history-list" id="history-body">
                  <div class="empty-row">Entrez un Account ID puis cliquez sur Charger.</div>
                </div>
                <div class="history-load-more-wrap" id="history-load-more-wrap" hidden>
                  <button class="btn btn-primary" id="history-load-more" type="button">Load more</button>
                </div>
              </section>
            </div>
          </div>

        </section>
        <!-- BUILDS TAB -->
        <section class="tab" id="tab-builds">
          <header class="page-head">
            <div class="page-meta">
              <h1>Builds</h1>
              <p>Selectionnez un hero pour afficher ses builds recommandes.</p>
            </div>
          </header>
          <div class="card">
            <div class="controls">
              <div class="field">
                <label for="builds-hero-filter">Hero</label>
                <select id="builds-hero-filter" class="select" disabled>
                  <option value="">Choisir un hero</option>
                </select>
              </div>
            </div>
            <div class="builds-status" id="builds-status">Chargement du catalogue de builds...</div>
            <div class="builds-grid" id="builds-grid">
              <div class="empty-row">Selectionnez un hero pour voir les builds.</div>
            </div>
          </div>
        </section>
        <!-- GUIDE TAB -->
        <section class="tab" id="tab-guide">
          <header class="page-head">
            <div class="page-meta">
              <h1>Guide stratégique</h1>
              <p>Version complète 2026 du guide DeadlockMentor (timings, macro et tempo).</p>
            </div>
          </header>
          <div class="card">
            <div class="guide-content">
              <h3>Vue rapide des timings (1 coup d'oeil)</h3>
              <p>Objectif: avoir tous les timings critiques visibles sans scroller. Les valeurs non officiellement consolidées sont marquées "À vérifier".</p>
              <div class="guide-timing-grid">
                <article class="guide-timing-card">
                  <div class="guide-time">2:00</div>
                  <div class="guide-label">Petites boxes + statues</div>
                  <div class="guide-sub">Respawn 3:00</div>
                  <span class="badge b-ok">Confirmé</span>
                </article>
                <article class="guide-timing-card">
                  <div class="guide-time">2:00</div>
                  <div class="guide-label">Camp petit (Small)</div>
                  <div class="guide-sub">Respawn base historique 3:00; patch 01/2026: -30% global non confirmé en absolu</div>
                  <span class="badge b-check">À vérifier</span>
                </article>
                <article class="guide-timing-card">
                  <div class="guide-time">5:00</div>
                  <div class="guide-label">Camp moyen (Medium)</div>
                  <div class="guide-sub">Respawn historique 5:00 (ou 6:00 selon sources antérieures)</div>
                  <span class="badge b-check">À vérifier</span>
                </article>
                <article class="guide-timing-card">
                  <div class="guide-time">8:00</div>
                  <div class="guide-label">Camp grand (Large)</div>
                  <div class="guide-sub">Respawn historique 8:00</div>
                  <span class="badge b-check">À vérifier</span>
                </article>
                <article class="guide-timing-card">
                  <div class="guide-time">8:00</div>
                  <div class="guide-label">Vault / Sinner's Sacrifice</div>
                  <div class="guide-sub">Intervalle historique 4:00 puis ajustements patchs</div>
                  <span class="badge b-check">À vérifier</span>
                </article>
                <article class="guide-timing-card">
                  <div class="guide-time">10:00</div>
                  <div class="guide-label">Boss central (Mid Boss)</div>
                  <div class="guide-sub">Respawn 7:00 puis 6:00 puis 5:00</div>
                  <span class="badge b-check">À vérifier</span>
                </article>
                <article class="guide-timing-card">
                  <div class="guide-time">10:00</div>
                  <div class="guide-label">Buffs temporaires (bridge / runes)</div>
                  <div class="guide-sub">Toutes les 5:00</div>
                  <span class="badge b-check">À vérifier</span>
                </article>
                <article class="guide-timing-card">
                  <div class="guide-time">10:00</div>
                  <div class="guide-label">Soul Urn</div>
                  <div class="guide-sub">Cycle 5:00, descente/activation variable selon patch</div>
                  <span class="badge b-check">À vérifier</span>
                </article>
                <article class="guide-timing-card">
                  <div class="guide-time">18:00+</div>
                  <div class="guide-label">Respawn joueurs (scaling)</div>
                  <div class="guide-sub">Repère: ~30s à 19:00, ~70s à 30:00 (incohérence cap 65s dans notes)</div>
                  <span class="badge b-check">À vérifier</span>
                </article>
              </div>

              <h3>Tableau détaillé filtrable</h3>
              <div class="toolbar">
                <input id="guide-timer-filter" class="input" type="text" placeholder="Filtrer: respawn, wave, urn, objective..." />
              </div>
              <div class="table-wrap">
                <table id="guide-timers-table">
                  <thead>
                    <tr>
                      <th>Événement</th>
                      <th>Apparition</th>
                      <th>Respawn</th>
                      <th>Importance</th>
                      <th>Type</th>
                      <th>Fiabilité</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Petites boxes / breakables</td>
                      <td>2:00</td>
                      <td>3:00</td>
                      <td>Injection d'économie early + trajectoires de rotation.</td>
                      <td><span class="badge b-early">Early</span></td>
                      <td><span class="badge b-ok">Confirmé</span></td>
                    </tr>
                    <tr>
                      <td>Golden statues</td>
                      <td>2:00</td>
                      <td>3:00</td>
                      <td>Buffs permanents progressifs, énorme valeur sur 20+ min.</td>
                      <td><span class="badge b-early">Early</span> <span class="badge b-mid">Mid</span></td>
                      <td><span class="badge b-ok">Confirmé</span></td>
                    </tr>
                    <tr>
                      <td>Camp petit (Small)</td>
                      <td>2:00</td>
                      <td>Historique 3:00; patch 01/2026 annonce -30% global des respawns neutral</td>
                      <td>Pivot farm safe entre lanes; base du tempo économique.</td>
                      <td><span class="badge b-early">Early</span> <span class="badge b-mid">Mid</span></td>
                      <td><span class="badge b-check">À vérifier</span></td>
                    </tr>
                    <tr>
                      <td>Camp moyen (Medium)</td>
                      <td>5:00</td>
                      <td>Historique 5:00 (certaines sources antérieures: 6:00)</td>
                      <td>Spike de souls intermédiaire pour premier gros item.</td>
                      <td><span class="badge b-mid">Mid</span></td>
                      <td><span class="badge b-check">À vérifier</span></td>
                    </tr>
                    <tr>
                      <td>Camp grand (Large)</td>
                      <td>8:00</td>
                      <td>Historique 8:00</td>
                      <td>Fenêtre macro majeure: vol de jungle / map control.</td>
                      <td><span class="badge b-mid">Mid</span></td>
                      <td><span class="badge b-check">À vérifier</span></td>
                    </tr>
                    <tr>
                      <td>Vault / Sinner's Sacrifice</td>
                      <td>8:00</td>
                      <td>Historique 4:00 (dépend patch)</td>
                      <td>Objectif à forte valeur, force les rotations inter-lanes.</td>
                      <td><span class="badge b-mid">Mid</span></td>
                      <td><span class="badge b-check">À vérifier</span></td>
                    </tr>
                    <tr>
                      <td>Buffs temporaires (bridge / runes)</td>
                      <td>10:00</td>
                      <td>5:00</td>
                      <td>Accélère les fights objectifs et le snowball de tempo.</td>
                      <td><span class="badge b-mid">Mid</span> <span class="badge b-late">Late</span></td>
                      <td><span class="badge b-check">À vérifier</span></td>
                    </tr>
                    <tr>
                      <td>Soul Urn</td>
                      <td>10:00</td>
                      <td>5:00 (descente/activation variable selon patch)</td>
                      <td>Trade macro clé: forcer contest ou cross-map objective.</td>
                      <td><span class="badge b-mid">Mid</span></td>
                      <td><span class="badge b-check">À vérifier</span></td>
                    </tr>
                    <tr>
                      <td>Boss central (Mid Boss)</td>
                      <td>10:00</td>
                      <td>7:00 puis 6:00 puis 5:00</td>
                      <td>Point de bascule majeur; préparation 30-40s avant obligatoire.</td>
                      <td><span class="badge b-mid">Mid</span> <span class="badge b-late">Late</span></td>
                      <td><span class="badge b-check">À vérifier</span></td>
                    </tr>
                    <tr>
                      <td>Respawn joueur (scaling)</td>
                      <td>Dès 18:00 (confirmé patch notes)</td>
                      <td>Augmente avec la durée de partie</td>
                      <td>Chaque pickoff ouvre une vraie fenêtre objectif.</td>
                      <td><span class="badge b-mid">Mid</span> <span class="badge b-late">Late</span></td>
                      <td><span class="badge b-ok">Confirmé</span></td>
                    </tr>
                    <tr>
                      <td>Repères respawn</td>
                      <td>19:00 ≈ 30s</td>
                      <td>30:00 ≈ 70s (notes mentionnent aussi cap 65s)</td>
                      <td>Forcer objectif dès surnombre.</td>
                      <td><span class="badge b-mid">Mid</span> <span class="badge b-late">Late</span></td>
                      <td><span class="badge b-check">À vérifier</span></td>
                    </tr>
                    <tr>
                      <td>Intervalle waves après 20:00</td>
                      <td>Réduction annoncée (30s → 25s)</td>
                      <td>N/A</td>
                      <td>Push de lanes plus fréquent, plus de fenêtres setup.</td>
                      <td><span class="badge b-mid">Mid</span> <span class="badge b-late">Late</span></td>
                      <td><span class="badge b-ok">Confirmé</span></td>
                    </tr>
                    <tr>
                      <td>Backdoor guardians</td>
                      <td>Pas de résistance backdoor avant 8:00</td>
                      <td>N/A</td>
                      <td>Permet pression structurelle précoce.</td>
                      <td><span class="badge b-early">Early</span></td>
                      <td><span class="badge b-ok">Confirmé</span></td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <h3>Plan de jeu rapide</h3>
              <h4>Early game (0-8 min)</h4>
              <ul>
                <li>Priorité: sécuriser la wave avant de prendre des ressources hors lane.</li>
                <li>Freeze pour punir l'exposition; push pour reset, achat ou rotation.</li>
                <li>Erreur clé: se battre sans prio lane puis perdre wave + tempo.</li>
              </ul>

              <h4>Mid game (8-18 min)</h4>
              <ul>
                <li>Prépare l'objectif 20-30s avant (push lane, reset, group).</li>
                <li>Synchronise power spike: achat majeur + ultis + position.</li>
                <li>Punition respawn: pas de chase inutile, conversion directe en objectif.</li>
              </ul>

              <h4>Late game</h4>
              <ul>
                <li>Les timers de mort deviennent la ressource principale.</li>
                <li>Fight seulement s'il ouvre immédiatement un objectif décisif.</li>
                <li>Forcer la fin quand la wave est en place et le surnombre acquis.</li>
              </ul>

              <h4>Méthode pratique</h4>
              <ol>
                <li>Noter les timings clés (kills, reset, objectif).</li>
                <li>Call en vocal: "objectif dans ~30s, on setup maintenant".</li>
                <li>Cycle standard: push lane → ressource → reset → regroupement.</li>
              </ol>

              <p class="guide-footer">Last update : 23 February 2026</p>
            </div>
          </div>
        </section>

      </main>
    </div>
    <!-- â”€â”€ MATCH DETAIL MODAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
    <div class="modal-overlay" id="match-modal" hidden>
      <div class="modal-panel">
        <div class="modal-head">
          <div class="modal-title-block">
            <span class="modal-match-id" id="modal-match-id">Match #-</span>
            <span class="modal-meta" id="modal-meta"></span>
          </div>
          <div class="modal-head-right">
            <span class="modal-outcome" id="modal-outcome"></span>
            <button class="btn-close" id="modal-close" aria-label="Fermer">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
              </svg>
            </button>
          </div>
        </div>
        
        <!-- Match Tabs Navigation -->
        <div class="match-tabs-nav">
          <button class="match-tab-btn is-active" data-match-tab="overview">Overview</button>
          <button class="match-tab-btn" data-match-tab="coaching">Coaching</button>
          <button class="match-tab-btn" data-match-tab="economy">Economy</button>
          <button class="match-tab-btn" data-match-tab="damage">Damage</button>
          <button class="match-tab-btn" data-match-tab="items">Items</button>
          <button class="match-tab-btn" data-match-tab="timeline">Scoreboard</button>
        </div>
        
        <div class="modal-body" id="modal-body">
          <div class="loading-row"><span class="spinner"></span> Chargement...</div>
        </div>
      </div>
    </div>

    <script src="./app.js"></script>
  </body>
</html>




