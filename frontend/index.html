<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deadlock Explorer</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="app-shell">

      <!-- ── SIDEBAR ─────────────────────────────────────── -->
      <aside class="sidebar">
        <div class="brand">
          <svg class="brand-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <rect x="3" y="11" width="18" height="11" rx="2"/>
            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
          </svg>
          <div class="brand-text">
            <span class="brand-name">Deadlock</span>
            <span class="brand-sub">Explorer</span>
          </div>
        </div>

        <nav class="sidebar-nav">
          <button class="nav-item is-active" data-tab="health">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
            </svg>
            <span>Santé API</span>
          </button>
          <button class="nav-item" data-tab="leaderboard">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="20" x2="18" y2="10"/>
              <line x1="12" y1="20" x2="12" y2="4"/>
              <line x1="6" y1="20" x2="6" y2="14"/>
            </svg>
            <span>Leaderboard</span>
          </button>
          <button class="nav-item" data-tab="history">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            <span>Historique</span>
          </button>
          <button class="nav-item" data-tab="coach">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <circle cx="12" cy="12" r="6"/>
              <circle cx="12" cy="12" r="2"/>
            </svg>
            <span>Coaching</span>
          </button>
        </nav>

        <div class="sidebar-foot">
          <div class="api-status" id="api-status">
            <span class="api-dot"></span>
            <span class="api-label">Vérification…</span>
          </div>
        </div>
      </aside>

      <!-- ── MAIN CONTENT ────────────────────────────────── -->
      <main class="content-area">

        <!-- SANTÉ TAB -->
        <section class="tab is-active" id="tab-health">
          <header class="page-head">
            <div class="page-meta">
              <h1>Santé de l'API</h1>
              <p>Vérifier l'état opérationnel de l'API Deadlock.</p>
            </div>
            <button class="btn btn-primary" id="btn-health">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="23 4 23 10 17 10"/>
                <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/>
              </svg>
              Actualiser
            </button>
          </header>
          <div class="card">
            <div class="code-label">Réponse JSON</div>
            <pre class="code-block" id="health-output">Appuyez sur « Actualiser » pour interroger l'API…</pre>
          </div>
        </section>

        <!-- LEADERBOARD TAB -->
        <section class="tab" id="tab-leaderboard">
          <header class="page-head">
            <div class="page-meta">
              <h1>Leaderboard</h1>
              <p>Classement des meilleurs joueurs par région.</p>
            </div>
          </header>
          <div class="card">
            <div class="controls">
              <div class="field">
                <label for="region">Région</label>
                <select id="region" class="select">
                  <option>Europe</option>
                  <option>Asia</option>
                  <option>NAmerica</option>
                  <option>SAmerica</option>
                  <option>Oceania</option>
                </select>
              </div>
              <div class="field">
                <label for="limit">Joueurs</label>
                <input id="limit" class="input w-20" type="number" min="1" max="100" value="10" />
              </div>
              <button class="btn btn-primary ml-auto" id="btn-leaderboard">Charger</button>
            </div>
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th class="w-14">#</th>
                    <th>Joueur</th>
                    <th>Badge</th>
                    <th>Top Héros</th>
                  </tr>
                </thead>
                <tbody id="leaderboard-body">
                  <tr><td colspan="4" class="empty-row">Choisissez une région et cliquez sur Charger.</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- HISTORIQUE TAB -->
        <section class="tab" id="tab-history">
          <header class="page-head">
            <div class="page-meta">
              <h1>Historique Joueur</h1>
              <p>Les 30 dernières parties d'un joueur.</p>
            </div>
          </header>
          <div class="card">
            <div class="controls">
              <div class="field">
                <label for="accountId">Account ID</label>
                <input id="accountId" class="input w-40" type="number" value="906011648" placeholder="Ex: 906011648" />
              </div>
              <button class="btn btn-primary ml-auto" id="btn-history">Charger</button>
            </div>
            <div style="padding: 12px; margin-top: 8px; background: rgba(255, 193, 7, 0.1); border-left: 3px solid #ffc107; border-radius: 4px; font-size: 13px; color: #ffc107;">
              ℹ️ Entrez directement un Account ID (ex: depuis le leaderboard ou l'URL d'un profil Steam).
            </div>
            <div id="playerInfoDisplay" style="display: none; margin: 16px 0; padding: 12px; background: var(--card-alt); border-radius: var(--radius); border: 1px solid var(--border);">
              <div style="display: flex; align-items: center; gap: 8px;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="20" height="20">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <span style="font-weight: 500; color: var(--text);" id="playerInfoName"></span>
                <span style="color: var(--muted); font-size: 14px;" id="playerInfoId"></span>
              </div>
            </div>
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>Match ID</th>
                    <th>Héro</th>
                    <th class="center">K / D / A</th>
                    <th class="right">Net Worth</th>
                    <th>Début</th>
                  </tr>
                </thead>
                <tbody id="history-body">
                  <tr><td colspan="5" class="empty-row">Entrez un Account ID puis cliquez sur Charger.</td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <!-- COACHING TAB -->
        <section class="tab" id="tab-coach">
          <header class="page-head">
            <div class="page-meta">
              <h1>Rapport Coaching</h1>
              <p>Analyse approfondie des performances sur plusieurs parties.</p>
            </div>
          </header>
          <div class="card">
            <div class="controls">
              <div class="field">
                <label for="coachAccountId">Account ID</label>
                <input id="coachAccountId" class="input w-40" type="number" value="906011648" placeholder="Ex: 906011648" />
              </div>
              <div class="field">
                <label for="coachMatches">Nb. Matchs</label>
                <input id="coachMatches" class="input w-20" type="number" min="10" max="100" value="30" />
              </div>
              <button class="btn btn-primary ml-auto" id="btn-coach">Analyser</button>
            </div>
            <div style="padding: 12px; margin-top: 8px; background: rgba(255, 193, 7, 0.1); border-left: 3px solid #ffc107; border-radius: 4px; font-size: 13px; color: #ffc107;">
              ℹ️ Entrez directement un Account ID pour lancer l'analyse.
            </div>
            <div id="coachPlayerInfoDisplay" style="display: none; margin: 16px 0; padding: 12px; background: var(--card-alt); border-radius: var(--radius); border: 1px solid var(--border);">
              <div style="display: flex; align-items: center; gap: 8px;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" width="20" height="20">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <span style="font-weight: 500; color: var(--text);" id="coachPlayerInfoName"></span>
                <span style="color: var(--muted); font-size: 14px;" id="coachPlayerInfoId"></span>
              </div>
            </div>
          </div>
          <div class="stats-grid" id="coach-stats-grid"></div>
          <div id="coach-findings"></div>
        </section>

      </main>
    </div>
    <!-- ── MATCH DETAIL MODAL ──────────────────────────── -->
    <div class="modal-overlay" id="match-modal" hidden>
      <div class="modal-panel">
        <div class="modal-head">
          <div class="modal-title-block">
            <span class="modal-match-id" id="modal-match-id">Match #—</span>
            <span class="modal-meta" id="modal-meta"></span>
          </div>
          <div class="modal-head-right">
            <span class="modal-outcome" id="modal-outcome"></span>
            <button class="btn-close" id="modal-close" aria-label="Fermer">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                <line x1="18" y1="6" x2="6" y2="18"/>
                <line x1="6" y1="6" x2="18" y2="18"/>
              </svg>
            </button>
          </div>
        </div>
        
        <!-- Match Tabs Navigation -->
        <div class="match-tabs-nav">
          <button class="match-tab-btn is-active" data-match-tab="overview">Overview</button>
          <button class="match-tab-btn" data-match-tab="economy">Economy</button>
          <button class="match-tab-btn" data-match-tab="damage">Damage</button>
          <button class="match-tab-btn" data-match-tab="items">Items</button>
          <button class="match-tab-btn" data-match-tab="timeline">Scoreboard</button>
        </div>
        
        <div class="modal-body" id="modal-body">
          <div class="loading-row"><span class="spinner"></span> Chargement…</div>
        </div>
      </div>
    </div>

    <script src="./app.js"></script>
  </body>
</html>

